!function(v){function e(e){for(var n,t,o=e[0],r=e[1],i=e[2],u=0,a=[];u<o.length;u++)t=o[u],s[t]&&a.push(s[t][0]),s[t]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(v[n]=r[n]);for(p&&p(e);a.length;)a.shift()();return f.push.apply(f,i||[]),l()}function l(){for(var e,n=0;n<f.length;n++){for(var t=f[n],o=!0,r=1;r<t.length;r++){var i=t[r];0!==s[i]&&(o=!1)}o&&(f.splice(n--,1),e=u(u.s=t[0]))}return e}var t={},s={4:0},f=[];function u(e){if(t[e])return t[e].exports;var n=t[e]={i:e,l:!1,exports:{}};return v[e].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.m=v,u.c=t,u.d=function(e,n,t){u.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},u.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(n,e){if(1&e&&(n=u(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(u.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var o in n)u.d(t,o,function(e){return n[e]}.bind(null,o));return t},u.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return u.d(n,"a",n),n},u.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},u.p="";var n=window.webpackJsonp=window.webpackJsonp||[],o=n.push.bind(n);n.push=e,n=n.slice();for(var r=0;r<n.length;r++)e(n[r]);var p=o;f.push([17,5]),l()}({17:function(e,n,t){e.exports=t(18)},18:function(e,n,t){"use strict";t.r(n);var T=t(19),o=t(20),y=t.n(o),r=t(21),w=t.n(r);!function(){var t={isPlay:!1,index:0,progress:0,duration:.8,displacement:7},o=new Tweakpane;o.addInput(t,"progress",{min:0,max:1}).on("change",function(e){x.uniforms.uProgress.value=e}),o.addInput(t,"duration",{step:.1,min:0,max:10}),o.addInput(t,"displacement",{label:"disp",options:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,11:11,12:12,13:13,14:14,15:15}}).on("change",function(e){x.uniforms.uDisplacementTexture.value=v[e].tex}),o.addButton({title:"start"}).on("click",function(){if(!0===t.isPlay)return;t.isPlay=!0;var e=t.index,n=e+1<i.length?e+1:0;x.uniforms.uTexturePrev.value=i[e].tex,x.uniforms.uTextureNext.value=i[n].tex,t.progress=0,x.uniforms.uProgress.value=0,TweenMax.to(t,t.duration,{progress:1,onUpdate:function(){o.refresh()},ease:Power2.easeOut,onComplete:function(){t.isPlay=!1,t.index=n}})});var e=[],r=T.default.imagesPath+"common/sample/",i=[{fileName:"1.jpg",tex:void 0},{fileName:"2.jpg",tex:void 0},{fileName:"3.jpg",tex:void 0}],u=new THREE.TextureLoader,n=new THREE.Vector2(2048,1536);i.forEach(function(o){e.push(new Promise(function(n,t){u.load(r+o.fileName,function(e){o.tex=e,n()},void 0,function(e){t(e)})}))});var a=T.default.imagesPath+"displacement-distortion/",v=[{fileName:"1.jpg",tex:void 0},{fileName:"2.jpg",tex:void 0},{fileName:"3.jpg",tex:void 0},{fileName:"4.png",tex:void 0},{fileName:"5.png",tex:void 0},{fileName:"6.jpg",tex:void 0},{fileName:"7.jpg",tex:void 0},{fileName:"8.jpg",tex:void 0},{fileName:"9.jpg",tex:void 0},{fileName:"10.jpg",tex:void 0},{fileName:"11.jpg",tex:void 0},{fileName:"12.jpg",tex:void 0},{fileName:"13.jpg",tex:void 0},{fileName:"14.jpg",tex:void 0},{fileName:"15.jpg",tex:void 0},{fileName:"16.jpg",tex:void 0}],l=new THREE.TextureLoader;v.forEach(function(o){e.push(new Promise(function(n,t){l.load(a+o.fileName,function(e){console.log(e),e.wrapS=THREE.RepeatWrapping,e.wrapT=THREE.RepeatWrapping,e.repeat.set(4,4),o.tex=e,n()},void 0,function(e){t(e)})}))});var s=new THREE.Scene,f=new THREE.OrthographicCamera(-1,1,1,-1,0,-1),p=new THREE.WebGLRenderer({canvas:document.querySelector("#canvas"),antialias:!0}),c=new THREE.PlaneGeometry(2,2,1,1),x=new THREE.ShaderMaterial({uniforms:{uResolution:{type:"v2",value:new THREE.Vector2},uTexResolution:{type:"v2",value:n},uTexturePrev:{type:"t",value:void 0},uTextureNext:{type:"t",value:void 0},uProgress:{type:"f",value:t.progress},uDisplacementTexture:{type:"f",value:void 0}},vertexShader:y.a,fragmentShader:w.a}),d=new THREE.Mesh(c,x);function m(){requestAnimationFrame(m),p.render(s,f)}function g(){var e=window.innerWidth,n=window.innerHeight;p.setPixelRatio(window.devicePixelRatio),p.setSize(e,n),x.uniforms.uResolution.value.x=e,x.uniforms.uResolution.value.y=n}s.add(d),window.addEventListener("resize",g),g(),Promise.all(e).then(function(){x.uniforms.uTexturePrev.value=i[0].tex,x.uniforms.uTextureNext.value=i[1].tex,x.uniforms.uDisplacementTexture.value=v[t.displacement].tex,m()},function(e){console.log(e)})}()},20:function(e,n){e.exports="#define GLSLIFY 1\nuniform vec2 uResolution;\nuniform vec2 uTexResolution;\nuniform sampler2D uTexturePrev;\nuniform sampler2D uTextureNext;\n\nvarying vec2 vUv;\nvarying vec2 vTexUv; // テクスチャ用\n\nvoid main() {\n  // 画像の縦横比を補正してbackground-size:coverの挙動にする\n  vec2 ratio = vec2(\n  min((uResolution.x / uResolution.y) / (uTexResolution.x / uTexResolution.y), 1.0),\n  min((uResolution.y / uResolution.x) / (uTexResolution.y / uTexResolution.x), 1.0)\n  );\n\n  vec2 _vTexUv = vec2(\n  uv.x * ratio.x + (1.0 - ratio.x) * 0.5,\n  uv.y * ratio.y + (1.0 - ratio.y) * 0.5\n  );\n\n  vUv = uv;\n  vTexUv = _vTexUv;\n  gl_Position = vec4(position, 1.0);\n}\n"},21:function(e,n){e.exports="#define GLSLIFY 1\nfloat random(vec2 p) {\n  return fract(sin(dot(p, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nuniform vec2 uResolution;\nuniform vec2 uTexResolution;\nuniform sampler2D uTexturePrev;\nuniform sampler2D uTextureNext;\nuniform sampler2D uDisplacementTexture;\nuniform float uProgress;\n\nvarying vec2 vUv;\nvarying vec2 vTexUv;\n\nvoid main() {\n\n  vec4 color = vec4(1.0);\n\n  vec4 disp = texture2D(uDisplacementTexture, vTexUv);\n\n  vec2 prevUv = vec2(vTexUv.x + uProgress * disp.r, vTexUv.y);\n  vec2 nextUv = vec2(vTexUv.x - (1.0 - uProgress) * disp.r, vTexUv.y);\n\n  vec4 prevColor = texture2D(uTexturePrev, prevUv);\n  vec4 nextColor = texture2D(uTextureNext, nextUv);\n\n  color = mix(prevColor, nextColor, uProgress);\n\n  gl_FragColor = color;\n}\n"}});